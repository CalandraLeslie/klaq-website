"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[549],{6930:(e,t,s)=>{s.d(t,{A:()=>u});var r=s(5155),a=s(9137),l=s.n(a),n=s(2115),o=s(4259),i=s(2178),d=s(5690),c=s(2152),b=s(5273),m=s(6408);let x=e=>e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");function u(e){let{isPlaying:t,onPlayToggle:s}=e,[a,u]=(0,n.useState)(.8),[p,h]=(0,n.useState)(!1),[j,f]=(0,n.useState)("Rock Block"),[v,g]=(0,n.useState)(1247),[w,N]=(0,n.useState)(!1),[y,E]=(0,n.useState)(null),[k,S]=(0,n.useState)(!1),L=(0,n.useRef)(null);(0,n.useEffect)(()=>{S(!0)},[]);let[A,M]=(0,n.useState)({title:"The Emptiness Machine",artist:"Linkin Park",album:"From Zero"});(0,n.useEffect)(()=>{if(L.current){let e=L.current,t=()=>{N(!0),E(null)},s=()=>{N(!1),E(null)},r=e=>{N(!1),console.error("Stream error:",e);let t=e.target,s=null==t?void 0:t.error,r="Stream temporarily unavailable. Please try again.";if(s)switch(s.code){case MediaError.MEDIA_ERR_ABORTED:r="Stream playback aborted";break;case MediaError.MEDIA_ERR_NETWORK:r="Network error while loading stream";break;case MediaError.MEDIA_ERR_DECODE:r="Stream format error";break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:r="Stream source not supported"}E(r)},a=()=>{console.log("Stream stalled, attempting to reconnect..."),E("Connection unstable, reconnecting...")},l=()=>{N(!1),E("Stream connection aborted")};return e.addEventListener("loadstart",t),e.addEventListener("canplay",s),e.addEventListener("error",r),e.addEventListener("stalled",a),e.addEventListener("abort",l),()=>{e.removeEventListener("loadstart",t),e.removeEventListener("canplay",s),e.removeEventListener("error",r),e.removeEventListener("stalled",a),e.removeEventListener("abort",l)}}},[]),(0,n.useEffect)(()=>{if(L.current)if(t){N(!0),E(null);let e=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;try{L.current&&(L.current.load(),await L.current.play(),N(!1),console.log("Stream started successfully"))}catch(s){console.error("Play attempt failed:",s),t>0?(console.log("Retrying play... (".concat(t," attempts left)")),setTimeout(()=>e(t-1),1e3)):(s instanceof Error?"NotAllowedError"===s.name?E("Please click play to start the stream (browser autoplay policy)"):"NotSupportedError"===s.name?E("Stream format not supported by your browser"):"AbortError"===s.name?E("Stream connection was interrupted"):E("Unable to start stream. Please check your connection."):E("Unable to start stream. Please check your connection."),N(!1))}};e()}else L.current.pause(),N(!1)},[t]),(0,n.useEffect)(()=>{L.current&&(L.current.volume=p?0:a)},[a,p]),(0,n.useEffect)(()=>{let e=setInterval(()=>{g(e=>e+Math.floor(10*Math.random()-5))},3e4);return()=>clearInterval(e)},[]),(0,n.useEffect)(()=>{let e=async()=>{try{let e=await fetch("https://np.tritondigital.com/public/nowplaying?mountName=KLAQ&numberToFetch=1&eventType=track"),t=await e.json();if(t&&t.nowplaying&&t.nowplaying.length>0){let e=t.nowplaying[0];M({title:e.songTitle||"Classic Rock",artist:e.artistName||"KLAQ 95.5",album:e.albumName||""})}}catch(s){console.log("Could not fetch current track info, using fallback");let e=[{title:"The Emptiness Machine",artist:"Linkin Park",album:"From Zero"},{title:"Black Dog",artist:"Led Zeppelin",album:"Led Zeppelin IV"},{title:"Blurry",artist:"Puddle Of Mudd",album:"Come Clean"},{title:"Ace of Spades",artist:"Motorhead",album:"Bloodcovered"},{title:"Today's Song",artist:"Foo Fighters",album:"Today's Song - Single"}];t&&M(e[Math.floor(Math.random()*e.length)])}};e();let s=setInterval(e,3e4);return()=>clearInterval(s)},[t]);let R=e=>{u(e),0===e?h(!0):h(!1)};return(0,r.jsxs)("div",{className:"jsx-58529eb06e9bd402 bg-gradient-to-r from-red-600 to-red-700 text-white p-6 rounded-xl shadow-2xl relative overflow-hidden",children:[(0,r.jsx)("div",{className:"jsx-58529eb06e9bd402 absolute inset-0 bg-gradient-to-r from-red-500/20 to-red-800/20"}),t&&(0,r.jsx)("div",{className:"jsx-58529eb06e9bd402 absolute inset-0",children:[void 0,void 0,void 0].map((e,t)=>(0,r.jsx)("div",{style:{animationDelay:"".concat(.5*t,"s"),animationDuration:"2s"},className:"jsx-58529eb06e9bd402 absolute inset-0 rounded-xl border border-white/20 animate-pulse"},t))}),(0,r.jsxs)("audio",{ref:L,preload:"none",crossOrigin:"anonymous",className:"jsx-58529eb06e9bd402 hidden",children:[(0,r.jsx)("source",{src:"https://stream.revma.ihrhls.com/zc185",type:"audio/mpeg",className:"jsx-58529eb06e9bd402"}),(0,r.jsx)("source",{src:"https://ice1.somafm.com/groovesalad-256-mp3",type:"audio/mpeg",className:"jsx-58529eb06e9bd402"}),(0,r.jsx)("source",{src:"https://playerservices.streamtheworld.com/api/livestream-redirect/KLAQ.mp3",type:"audio/mpeg",className:"jsx-58529eb06e9bd402"})]}),(0,r.jsxs)("div",{className:"jsx-58529eb06e9bd402 relative z-10",children:[y&&(0,r.jsx)("div",{className:"jsx-58529eb06e9bd402 mb-4 p-3 bg-red-800/50 border border-red-600/50 rounded-lg",children:(0,r.jsxs)("div",{className:"jsx-58529eb06e9bd402 flex items-center justify-between",children:[(0,r.jsx)("p",{className:"jsx-58529eb06e9bd402 text-sm text-red-200",children:y}),(0,r.jsx)("button",{onClick:()=>{L.current&&(N(!0),E(null),L.current.load())},className:"jsx-58529eb06e9bd402 ml-2 px-3 py-1 bg-red-700 hover:bg-red-600 rounded text-xs transition-colors",children:"Retry"})]})}),(0,r.jsxs)("div",{className:"jsx-58529eb06e9bd402 flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"jsx-58529eb06e9bd402 flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"jsx-58529eb06e9bd402 w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:(0,r.jsx)(o.A,{className:"w-6 h-6"})}),(0,r.jsxs)("div",{className:"jsx-58529eb06e9bd402",children:[(0,r.jsx)("h3",{className:"jsx-58529eb06e9bd402 text-lg font-bold",children:"95.5 KLAQ"}),(0,r.jsx)("p",{className:"jsx-58529eb06e9bd402 text-sm text-red-100",children:"Live Stream"})]})]}),(0,r.jsxs)("div",{className:"jsx-58529eb06e9bd402 flex items-center space-x-2 text-sm",children:[(0,r.jsx)("div",{className:"jsx-58529eb06e9bd402 w-2 h-2 bg-green-400 rounded-full animate-pulse"}),(0,r.jsxs)("span",{className:"jsx-58529eb06e9bd402",children:[k?x(v):"1,247"," listeners"]})]})]}),(0,r.jsxs)("div",{className:"jsx-58529eb06e9bd402 mb-4",children:[(0,r.jsx)("p",{className:"jsx-58529eb06e9bd402 text-sm text-red-100 mb-1",children:"Now Playing"}),(0,r.jsxs)(m.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-1",children:[(0,r.jsx)("h4",{className:"jsx-58529eb06e9bd402 font-semibold truncate",children:A.title}),(0,r.jsxs)("p",{className:"jsx-58529eb06e9bd402 text-sm text-red-100",children:[A.artist," â€¢ ",A.album]})]},A.title)]}),(0,r.jsxs)("div",{className:"jsx-58529eb06e9bd402 mb-6",children:[(0,r.jsx)("p",{className:"jsx-58529eb06e9bd402 text-sm text-red-100 mb-1",children:"Current Show"}),(0,r.jsx)("p",{className:"jsx-58529eb06e9bd402 font-medium",children:j})]}),(0,r.jsxs)("div",{className:"jsx-58529eb06e9bd402 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"jsx-58529eb06e9bd402 flex items-center space-x-4",children:[(0,r.jsx)("button",{onClick:s,disabled:w,"aria-label":t?"Pause stream":"Play stream",className:"jsx-58529eb06e9bd402 w-12 h-12 bg-white/20 border border-white/30 hover:border-white/60 rounded-full flex items-center justify-center transition-all duration-200 focus-visible disabled:opacity-50",children:w?(0,r.jsx)("div",{className:"jsx-58529eb06e9bd402 w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"}):t?(0,r.jsx)(i.A,{className:"w-6 h-6"}):(0,r.jsx)(d.A,{className:"w-6 h-6 ml-1"})}),(0,r.jsxs)("div",{className:"jsx-58529eb06e9bd402 flex items-center space-x-2",children:[(0,r.jsx)("button",{onClick:()=>{h(!p)},"aria-label":p?"Unmute":"Mute",className:"jsx-58529eb06e9bd402 p-2 text-white hover:text-red-300 transition-colors duration-200 focus-visible",children:p?(0,r.jsx)(c.A,{className:"w-5 h-5"}):(0,r.jsx)(b.A,{className:"w-5 h-5"})}),(0,r.jsx)("div",{className:"jsx-58529eb06e9bd402 flex items-center space-x-2 min-w-24",children:(0,r.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:p?0:a,onChange:e=>R(parseFloat(e.target.value)),"aria-label":"Volume control",className:"jsx-58529eb06e9bd402 w-16 h-1 bg-white/20 rounded-lg appearance-none cursor-pointer slider"})})]})]}),(0,r.jsxs)("div",{className:"jsx-58529eb06e9bd402 text-right",children:[(0,r.jsx)("p",{className:"jsx-58529eb06e9bd402 text-xs text-red-100",children:"Frequency"}),(0,r.jsx)("p",{className:"jsx-58529eb06e9bd402 font-bold",children:"95.5 FM"})]})]})]}),(0,r.jsx)(l(),{id:"58529eb06e9bd402",children:".slider.jsx-58529eb06e9bd402::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;width:16px;height:16px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;background:white;cursor:pointer;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.2);-moz-box-shadow:0 2px 4px rgba(0,0,0,.2);box-shadow:0 2px 4px rgba(0,0,0,.2)}.slider.jsx-58529eb06e9bd402::-moz-range-thumb{width:16px;height:16px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;background:white;cursor:pointer;border:none;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.2);-moz-box-shadow:0 2px 4px rgba(0,0,0,.2);box-shadow:0 2px 4px rgba(0,0,0,.2)}"})]})}}}]);